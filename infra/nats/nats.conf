# NATS server configuration with system and app accounts
#
# SECURITY NOTE: The passwords below are defaults for local development.
# For production deployments, you should:
# 1. Generate strong passwords: openssl rand -hex 16
# 2. Set them via environment variables and use a wrapper script to substitute
#    them into this config file, OR
# 3. Configure NATS to use environment variables directly (if supported)
#
# Required environment variables:
# - NATS_SYS_USER (default: "sys")
# - NATS_SYS_PASSWORD (default: "sys" - CHANGE THIS!)
# - NATS_APP_USER (default: "app")
# - NATS_APP_PASSWORD (default: "app" - CHANGE THIS!)

server_name: flow-hackathon-nats

# Monitoring endpoint
http: 8222

# Enable JetStream and set storage directory
jetstream: {
  store_dir: "/data"
  max_mem: 1G
  max_file: 100G
}

# Accounts configuration
# SECURITY: Replace hardcoded passwords with strong random values
accounts: {
  SYS: {
    users: [ { user: "sys", password: "sys" } ]
  },
  APP: {
    jetstream: enabled
    users: [ { user: "app", password: "app" } ]
  }
}

# Use SYS as the system account for $SYS.REQ requests
system_account: SYS

# Map unauthenticated clients to APP account
no_auth_user: "app"


